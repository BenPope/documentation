---
title: Version upgrade
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

As part of Redpanda's evolution, new versions are released over time to deliver new features, enhancements, and improvements.
Due to that, it's essential to keep Redpanda up to date. Administrators can follow this guide to upgrade versions relevant to the environment in which Redpanda is currently running.

:::info
It's always important to read the [release notes](https://github.com/vectorizedio/redpanda/releases) before upgrading to alternate versions in order to anticipate and deal with any breaking changes.
:::

## Checking the current version

Before changing to a different version, you first need to determine which version you are currently running in your environment.

Determining the current version by utilizing the rpk command as shown below:

```bash
rpk version
```

The expected output look similar to:

```bash
v21.11.5 (rev af88fa1)
```

## Kubernetes

:::caution
Be advised for Kubernetes locally executed, there might be a loss of the data. To avoid data loss make sure to use persistent volumes.
:::

All applications running in Kubernetes require deployment files to execute, including Redpanda.
To upgrade to the latest version, change the `version` tag in your deployment file:

```yaml
...
spec:
  image: "vectorized/redpanda"
  version: "<current_version>"
...
```

After you save the file, apply the changes with the command:

```bash
kubectl apply -f <file_path/file_name>
```

Once the changes are applied, the cluster will perform a rolling upgrade, restarting one pod at a time.  During the upgrade a status field “upgrading” is true. You can see the status of the cluster by running:

```bash
kubectl describe cluster <cluster_name>
```

The “upgrading” status will turn to false once the upgrade is completed.

To check the individual pod details, including the image tag (version), use the following command:

```bash
kubectl describe pod <pod_name>
```

## Docker

As docker relies on images, replace the current image value with a new one.
Initially, check which image version is running on your docker:

```bash
docker images
```

After running the command, you will see the list of  images, including Redpanda. Now it’s time to check  the available versions on the [release notes page](https://github.com/vectorizedio/redpanda/releases).
Before beginning  the upgrade, you should  backup Redpanda's configuration file that is currently running to avoid any configuration losses.

```bash
docker cp <containerId>:/etc/redpanda/redpanda.yaml <preferred location>
```

Let's make sure that there is no Redpanda container up and running:

```bash
docker ps
```

:::caution
Be advised for Docker locally executed, there might be a loss of the data and topics. To avoid data loss make sure to use [persistent volumes](/docs/getting-started/quick-start-docker#create-network-and-persistent-volumes).
:::

Stop and remove Redpanda's container(s):

```bash
docker stop <container_id>
...
docker rm <container_id>
```

Remove current images:

```bash
docker rmi <image_id>
```

The next step is to pull the desired Redpanda's version, or you can set it to the `latest` in the `version` tag:

```bash
docker pull docker.vectorized.io/vectorized/redpanda:<version>
```

Finally, you'll need to follow the steps from our [docker getting started](/docs/getting-started/quick-start-docker) document to start Redpanda.
If you have a previous `redpanda.yaml` configuration file, make sure to apply it to the configuration folder `/etc/redpanda` inside the container.

```bash
docker cp <path_to_saved_yaml_file>/redpanda.yaml <container_id>:/etc/redpanda
```

Once completed, restart the cluster:

```bash
docker restart <container_name>
```

Now you have the desired version of Redpanda running.

## Linux

For Linux distributions, the process is simple, however, it changes according to the distribution:

<Tabs>
<TabItem value="fedoraRedhat" label="Fedora/RedHat" default>

Execute the following commands on the terminal:
```bash
sudo yum update redpanda
```

</TabItem>
<TabItem value="debianUbuntu" label="Debian/Ubuntu">

Execute the following commands on the terminal:
```bash
sudo apt update
sudo apt install redpanda
```

</TabItem>
</Tabs>

Once the upgrade is complete, you can perform the following check to validate the action:

```bash
rpk version
```

## MacOS

If you previously installed Redpanda with brew, you can run the following command:

```bash
brew install vectorizedio/tap/redpanda
```

Installations from binary files require downloading the preferred version from the release list and overwriting the current rpk file in the installed location.

## Windows

Currently on Windows,it is only possible to run Redpanda on Docker. Therefore, the [Docker guide](/docs/getting-started/quick-start-docker) is applicable here.

## Post-upgrade applications

Once the upgrade is complete, you need to ensure that the cluster is healthy.
To verify that the  cluster is running properly , use this command:

```bash
rpk cluster status
```

You'll want to set up a real-time dashboard to monitor your cluster health; That's easily done by following the steps in our [monitoring guide](/docs/deploy-self-hosted/monitoring).
